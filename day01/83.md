现在的架构很多，各种各样的，如高并发架构、异地多活架构、容器化架构、微服务架构、高可用架构、弹性化架构等，还有和这些架构相关的管理型的技术方法，如 DevOps、应用监控、自动化运维、SOA 服务治理、去 IOE 等等，还有很多。

那什么是分布式系统？分布式系统是支持分布式处理的软件系统，是由通信网络互联的多处理机体系结构上执行任务的系统。包括分布式操作系统、分布式程序设计语言及其编译系统、分布式文件系统分布式数据库系统等，当然这些也是分布式的关键技术。

 

**使用分布式系统主要有：**

1.增大系统容量。我们的业务量越来越大，而要能应对越来越大的业务量，一台机器的性能已经无法满足了，我们需要多台机器才能应对大规模的应用场景。所以，我们需要垂直或是水平拆分业务系统，让其变成一个分布式的架构。

2.加强系统可用。我们的业务越来越关键，需要提高整个系统架构的可用性，这就意味着架构中不能存在单点故障。这样，整个系统不会因为一台机器出故障而导致整体不可用。所以，需要通过分布式架构来冗余系统以消除单点故障，从而提高系统的可用性。

3.因为模块化，所以系统模块重用度更高

4.因为软件服务模块被拆分，开发和发布速度可以并行而变得更快

5.系统扩展性更高

6.团队协作流程也会得到改善

 

**分布式系统的类型有三种：**

1.分布式处理，但只有一个总数据库，没有局部数据库

2.分层式处理，每一层都有自己的数据库

3.充分分散的分布式网络，没有中央控制部分，各节点之间的联系方式又可以有多种，如松散的联接，紧密的联接，动态的联接，广播通知式的联接等

 

**常见的分布式****集群****架构**

 

**1、纯负载均衡形式**

在集群前面，前置一个流量分发的组件进行流量分发，整个集群的机器提供无差别的服务，这在常见的 web 服务器中是最最常见的。目前比较主流的方式就是整个集群机器上云，根据实时的调用量进行云服务器弹性伸缩。常见的负载均衡有硬件层面的 F5、软件层面的 nginx 等。

 

**2、领导选举型**

整个集群的消息都会转发到集群的领导这里，是一种 master-slavers，区别只是这个 master 是被临时选举出来的，一旦 master 宕机，集群会立刻选举出一个新的领导，继续对外提供服务。使用领导选举型架构的典型的应用有 ElasticSearch，zookeeper。

 

**3、区块链型**

整个集群的每一个节点都可以进行记录，但是记录的内容要得到整个集群 N 个机器的认可才是合法的。典型的应用有 Bit Coin，以及 Hyperledger。

 

 

 

 

**4、master-slaver型**

整个集群以某台 master 为中枢，进行集群的调度。交互是这样，一般会把所有的管理类型的数据放到 master 上，而把具体的数据放到 slaver 上，实际进行调用的时候，client 先调用 master 获取数据所存放的 server 的 信息，再自行跟 slave 进行交互。典型的系统有 Hadoop。集群，HBase 集群，Redis 集群等。

 

**5、规则型一致性Hash**

这种架构类型一般出现在数据库分库分表的设计中。按照规则进行分库分表，在查询之前使用规则引擎进行库和表的确认，再对具体的应用进行访问。为什么要用一致性 Hash ？其实用什么都可以，只是对于这类应用来说一致性 Hash 比较常见而已。

 

 

**单体应用和分布式架构的优缺点**

| 操作       | 传统单体架构         | 分布式服务化架构       |
| ---------- | -------------------- | ---------------------- |
| 新功能开发 | 需要时间             | 容易开发和实现         |
| 部署       | 不经常且容易部署     | 经常发布,部署复杂      |
| 隔离性     | 故障影响范围大       | 故障影响范围小         |
| 架构设计   | 难度小               | 难度级数增加           |
| 系统性能   | 响应时间快,吞吐量小  | 响应时间慢,吞吐量大    |
| 系统运维   | 运维简单             | 运维复杂               |
| 新人上手   | 学习曲线大(应用逻辑) | 学习曲线大(架构逻辑)   |
| 技术       | 技术单一且封闭       | 技术多样且开放         |
| 测试和差错 | 简单                 | 复杂                   |
| 系统扩展性 | 扩展性很差           | 扩展性很好             |
| 系统管理   | 重点在于开发成本     | 重点在于服务治理和调度 |

 

1.从上面的表格可以看到，分布式系统虽然有一些优势，但也存在一些问题

2.架构设计变得复杂（尤其是其中的分布式事务）

3.部署单个服务会比较快，但是如果一次部署需要多个服务，部署会变得复杂

4.系统的吞吐量会变大，但是响应时间会变长

5.运维复杂度会因为服务变多而变得很复杂

6.架构复杂导致学习曲线变大

7.测试和查错的复杂度增大

8.技术可以很多样，这会带来维护和运维的复杂度

9.管理分布式系统中的服务和调度变得困难和复杂

 

 

 