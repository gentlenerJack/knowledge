#加密算法

#对称与非对称

对称加密：对称加密，也叫私钥加密，是指加密和解密使用相同密钥的加密算法。有人也叫作传统密码算法，就是加密秘钥能够从解密密钥中推算出来，同时解密密钥也可以从加密密钥中推算出来
。在大多数的对称算法中，加密密钥和解密密钥是相同的，所以也称这种加密算法为秘密密钥算法或者单密密钥算法。


非对称加密：非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）。
公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。
因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法

常用的对称加密方式：

DES、TripleDES、RC2、RC4、RC5和Blowfish

一个对称加密方案由5部分组成：

1. 明文（plaintext）：原始消息，作为算法的输入；

2. 加密算法（encryption algorithm）：对明文进行各种替换和转换；

3. 密钥（secret key）：密钥也是加密算法的输入之一，算法进行的具体替换和转换取决于密钥；

4. 密文（ciphertext）：已被加密算法打乱的消息输出；

5. 解密算法（decryption algorithm）：本质是加密算法的反向执行，使用密文和同一个密钥作为输入产生原始明文


常用的非对称加密方式：

RSA、ECC（移动设备用）、Diffie-Hellman、El Gamal、DSA（数字签名用）

对称加密的使用场景？

由于算法效率较高，一般用于对效率有要求的实时数据加密通信。使用 VPN 或者代理进行 加密通信时，既要保证数据的保密性，又要保证不能有高的延迟，所以通常会使用对称加密算法。

非对称加密的使用场景？

非对称加密一般使用在：信息加密、登录认证和数字签名中

base64：Base64是一种基于64个可打印字符来表示二进制数据的表示方法

为什么要使用它：

计算机中任何数据都是按ascii码存储的，而ascii码的128～255之间的值是不可见字符
而在网络上交换数据时往往要经过多个路由设备，由于不同的设备对字符的处理方式有一些不同
这样那些不可见字符就有可能被处理错误，这是不利于传输的。所以就先把数据先做一个Base64编码，统统变成可见字符，降低错误率。

场景：
Base64常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据，包括MIME的电子邮件及XML的一些复杂数据

方式：
1.公钥证书：对证书来说，特别是根证书，一般都是作Base64编码的，因为它要在网上被许多人下载。电子邮件的附件一般也作Base64编码的，因为一个附件数据往往是有不可见字符的

实际上是使用一对加密字符串，一个称为公钥(public key)，
任何人都可以看到其内容，用于加密；另一个称为密钥(private key)，
只有拥有者才能看到，用于解密。通过公钥加密过的密文使用密钥可以轻
松解密，但根据公钥来猜测密钥却十分困难。例如 ssh

2.文本传输:xml格式的文件中如果想嵌入另一个xml文件。直接嵌入，那么各种标签（有两套xml标签）就混乱了，不容易被解析。怎么办？

	1，把另一个xml编译成字节数组转换成逗号隔开的字符串。

	2，编译成可见字符。

	结果：2好些。因为1消耗的空间比原来多一倍，而2只是多三分之一。

3.HTTP协议:http协议当中的key value字段的值，必须进行URLEncode ，
因为一些特殊符号（等号或者空格）是有特殊含义的，造成混淆，解析失败，那么需要把这些值统一处理为可见字符，传输完再解析回来。

4. 电子邮件（SMTP协议）：电子邮件的附件一般也作Base64编码的，因为一个附件数据往往是有不可见字符的。
很多比较老的协议还是只支持纯文本的,比如SMTP协议。
有时在一些特殊应用的场合，大多数消息是纯文本的，偶尔需要用这条纯文本通道传一张图片之类的情况发生的时候,就会用到base64

5.图片base64编码：网页中一些小图片可以直接以base64编码的方式嵌入。不用再用链接请求消耗资源。
之前在再做项目的时候涉及到上传图片的时候服务器接到的值可能丢失字符串，我们可以把值做一个字符串替换，分单个上传或多个上传


MD5定义：是一种被广泛使用的密码散列函数，将数据（如一段文字）运算变为另一固定长度值，是散列算法的基础原理，可以产生出一个128位（16字节）的散列值（hash value），用于确保信息传输完整一致。

MD5场景：在做登陆注册的时候用了MD5

有个项目的登陆模块使用到了cas，应需求要求，用户名和密码传输时使用了md5加密模式，加密的密码可以直接保存在数据库，但是加密的用户名则必须解密出来才行，于是后台的java代码中便写了针对用户名的解密代码。
而前台，是在输完用户名和密码后，点击登陆按钮的时候调用相应的方法进行加密并发请求传输。
登录功能要比对密码的时候，从数据库中取出的是密文，需要将用户输入的密码再进行md5加密以后再比对，否则就会失败
MD5在论坛上、软件发布时经常用，是为了保证文件的正确性，防止一些人盗用程序，加些木马或者篡改版权，设计的一套验证系统。每个文件都可以用MD5验证程序算出一个固定的MD5码来。软件作者往往会事先计算出他
的程序的MD5码并帖在网上。因此，在网上看到某个程序下载旁注明了MD5码时，可以把它记下来，下载了这个程序后用MD5验证程序计算你所下载的文件的MD5码，和你之前记下MD5码比较，就知道你下的是不是原版了，
如果两者相同，那么你所下载的是原版。如果计算出来的和网上注明的不匹配，那么你下载的这个文件不完整，或是被别人动过手脚。

SHA1定义：是一种密码散列函数，SHA-1可以生成一个被称为消息摘要的160位（20字节）散列值，散列值通常的呈现形式为40个十六进制数。
 数字签名的原理是将要传送的明文通过一种函数运算（Hash）转换成报文摘要（不同的明文对应不同的报文摘要），报文摘要加密后与明文一起传送给接受方，接受方将接受的明文产生新的报文摘要与发送方的发来报文摘要解密比较，比较结果一致表示明文未被改动，如果不一致表示明文已被篡改

哈希算法的应用：
 1、场景一：安全加密

       日常用户密码加密通常使用的都是 md5、sha等哈希函数，因为不可逆，而且微小的区别加密之后的结果差距很大，所以安全性更好。

   2、场景二：唯一标识 

       比如 URL 字段或者图片字段要求不能重复，这个时候就可以通过对相应字段值做 md5 处理，将数据统一为 32 位长度从数据库索引构建和查询角度效果更好，此外，还可以对文件之类的二进制数据做 md5 处理，作为唯一标识，这样判定重复文件的时候更快捷。

   3、场景三：数据校验

       比如从网上下载的很多文件（尤其是P2P站点资源），都会包含一个 MD5 值，用于校验下载数据的完整性，避免数据在中途被劫持篡改。

   4、场景五：散列函数

       前面已经提到，PHP 中的 md5、sha1、hash 等函数都是基于哈希算法计算散列值

   5、场景五：负载均衡

       对于同一个客户端上的请求，尤其是已登录用户的请求，需要将其会话请求都路由到同一台机器，以保证数据的一致性，这可以借助哈希算法来实现，通过用户 ID 尾号对总机器数取模（取多少位可以根据机器数定），将结果值作为机器编号。

   6、场景六：分布式缓存 

       分布式缓存和其他机器或数据库的分布式不一样，因为每台机器存放的缓存数据不一致，每当缓存机器扩容时，需要对缓存存放机器进行重新索引（或者部分重新索引），这里应用到的也是哈希算法的思想。

crc32定义：循环冗余码校验英文名称为Cyclical Redundancy Check，简称CRC。它是利用除法及余数的原理来作错误侦测（Error Detecting）的。实际应用时，发送装置计算出CRC值并随数据一同发送给接收装置，接收装置对收到的数据重新计算CRC并与收到的CRC相比较，若两个CRC值不同，则说明数据通讯出现错误。

CRC32 校验和通常用于可靠性较高的数据传输中。

CRC的检验码的计算方法有两种：一，直接校验法；二，查表校验法；

由于校验和是按位运算的结果，所以不同的数据可能有相同的校验，rc32只是做一个校验，帮助程序进行验证。类似md5一样 返回的值是参数的另一种形态  并没有改变数据本质。 只是帮助程序做个验证。




















